const _0x44b171=_0x1228;(function(_0xdb34d7,_0x2dd8a4){const _0x28bb28=_0x1228,_0x50024e=_0xdb34d7();while(!![]){try{const _0xa82161=-parseInt(_0x28bb28(0x138))/0x1*(parseInt(_0x28bb28(0x18e))/0x2)+parseInt(_0x28bb28(0x121))/0x3*(-parseInt(_0x28bb28(0x104))/0x4)+parseInt(_0x28bb28(0x11d))/0x5*(parseInt(_0x28bb28(0xf1))/0x6)+-parseInt(_0x28bb28(0x163))/0x7+-parseInt(_0x28bb28(0x157))/0x8+-parseInt(_0x28bb28(0x135))/0x9*(-parseInt(_0x28bb28(0x10b))/0xa)+parseInt(_0x28bb28(0xfc))/0xb*(parseInt(_0x28bb28(0x134))/0xc);if(_0xa82161===_0x2dd8a4)break;else _0x50024e['push'](_0x50024e['shift']());}catch(_0x747111){_0x50024e['push'](_0x50024e['shift']());}}}(_0x44cc,0x51a90));const licenseInput=document[_0x44b171(0x15e)]('license-input'),saveLicenseBtn=document['getElementById']('save-license-btn'),toastEl=document[_0x44b171(0x15e)](_0x44b171(0x140)),authSection=document['getElementById']('auth-section'),featureSection=document[_0x44b171(0x15e)](_0x44b171(0x115)),settingsSection=document['getElementById'](_0x44b171(0x105)),loadingMask=document[_0x44b171(0x15e)](_0x44b171(0x18a));let toastTimer=null;const nameInput=document[_0x44b171(0x15e)](_0x44b171(0x103)),remarkInput=document[_0x44b171(0x15e)](_0x44b171(0x12e)),phoneInput=document['getElementById'](_0x44b171(0x123)),idcardInput=document['getElementById'](_0x44b171(0x114)),provinceInput=document[_0x44b171(0x15e)](_0x44b171(0x11a)),cityInput=document[_0x44b171(0x15e)](_0x44b171(0xf9)),districtInput=document[_0x44b171(0x15e)](_0x44b171(0x102)),branchInput=document[_0x44b171(0x15e)](_0x44b171(0x191)),exchangeTimeInput=document[_0x44b171(0x15e)]('exchange-time-input'),quantityInput=document[_0x44b171(0x15e)](_0x44b171(0x100)),settingsBtn=document[_0x44b171(0x15e)](_0x44b171(0x129)),backBtn=document[_0x44b171(0x15e)]('back-btn'),personList=document[_0x44b171(0x15e)](_0x44b171(0xf4)),addFormContainer=document[_0x44b171(0x15e)](_0x44b171(0xf6)),addPersonBtn=document[_0x44b171(0x15e)](_0x44b171(0x118)),savePersonBtn=document['getElementById']('save-person-btn'),cancelFormBtn=document[_0x44b171(0x15e)]('cancel-form-btn'),formTitle=document['getElementById'](_0x44b171(0x112));function _0x44cc(){const _0x1de7a9=['8hrtiaq','map','error','branch-input','getAttribute','replace','24KtXwXG','+\x20添加人员\x20(','\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22field-label\x22\x20style=\x22margin-top:\x2010px\x22>兑换日期</div>\x0a\x20\x20\x20\x20\x20\x20<input\x20class=\x22inline-edit-exchange-time\x22\x20type=\x22date\x22\x20placeholder=\x22请选择兑换日期\x22\x20value=\x22','person-list','卡密验证失败，请更换卡密重试：','add-form-container','<div\x20class=\x22empty-state\x22>暂无人员信息<br/>点击\x22添加人员\x22开始添加</div>','0.6','city-input','target','message','10272614jYefKt','\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22field-label\x22\x20style=\x22margin-top:\x2010px\x22>身份证号码</div>\x0a\x20\x20\x20\x20\x20\x20<input\x20class=\x22inline-edit-idcard\x22\x20type=\x22text\x22\x20placeholder=\x22请输入身份证号码\x22\x20value=\x22','query','.inline-edit-name','quantity-input','set','district-input','name-input','12wYKcjk','settings-section','edit','object','click','match','验证失败：无响应','372930NvyYOz','VERIFY_LICENSE','激活失败：','quantity','time','forEach','province','form-title','lastError','idcard-input','feature-section','splice','已自动验证成功，剩余次数：','add-person-btn','data-action','province-input','nearest','local','250805oEkYtx','已删除','join','card_type','132987keumUM','textContent','phone-input','激活失败，请刷新页面后重试','更新成功','.inline-edit-phone','最多只能添加20人','未知错误','settings-btn','验证失败：','已达上限（20人）','.inline-edit-quantity','activate-script-btn','remark-input','style','branch','querySelectorAll','duration','length','12VVWGwv','9ytiEAv','\x22\x20/>\x0a\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22field-label\x22\x20style=\x22margin-top:\x2010px\x22>备注（仅用于显示）</div>\x0a\x20\x20\x20\x20\x20\x20<input\x20class=\x22inline-edit-remark\x22\x20type=\x22text\x22\x20placeholder=\x22例如：工行，家属账户等\x22\x20value=\x22','.inline-save-btn','61529UktaHx','[data-index=\x22','.inline-edit-branch','msg','total_count','innerHTML','includes','当前环境不支持扩展存储','toast','加载设置失败:','userSettings','remark','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22person-card-wrapper\x22\x20data-index=\x22','remaining_count','</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-small\x20btn-delete\x22\x20data-index=\x22','重复验证','data','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22person-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22person-card-header\x20','stringify','.inline-edit-exchange-time','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','data-index','__SX_PENDING_VIEW__','当前环境不支持扩展存储/通信，仅作界面预览使用。','sendMessage','\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-buttons\x22\x20style=\x22margin-top:\x2012px\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20inline-save-btn\x22\x20data-index=\x22','querySelector','display','delete','name','code','738448fFUsab','idcard','时间卡验证成功','none','parse','get','+\x20添加人员','getElementById','trim','remove','licenseKey','classList','2561454mJFxNc','[data-action]','success','disabled','添加成功','.inline-edit-idcard','\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22field-label\x22\x20style=\x22margin-top:\x2010px\x22>省份</div>\x0a\x20\x20\x20\x20\x20\x20<input\x20class=\x22inline-edit-province\x22\x20type=\x22text\x22\x20placeholder=\x22请输入省份\x22\x20value=\x22','city','expire_time','phone','卡密验证成功','opacity','已自动验证成功','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22person-card-name\x22>','value','add','未命名','\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22field-label\x22>姓名</div>\x0a\x20\x20\x20\x20\x20\x20<input\x20class=\x22inline-edit-name\x22\x20type=\x22text\x22\x20placeholder=\x22请输入姓名\x22\x20value=\x22','确定要删除这条人员信息吗？','.inline-edit-city','string','show','&quot;','isArray','.inline-edit-province','请输入姓名','.inline-edit-district','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22person-card-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-small\x20btn-edit\x22\x20data-index=\x22','tabs','info','district','storage','\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22field-label\x22\x20style=\x22margin-top:\x2010px\x22>预约数量</div>\x0a\x20\x20\x20\x20\x20\x20<input\x20class=\x22inline-edit-quantity\x22\x20type=\x22number\x22\x20placeholder=\x22请输入预约数量\x22\x20min=\x221\x22\x20value=\x22','脚本已激活','无法获取当前页面','test','count','保存成功','runtime','loading-mask','addEventListener','block','自动验证失败：'];_0x44cc=function(){return _0x1de7a9;};return _0x44cc();}let editingIndex=-0x1,persons=[];const DATE_PATTERN=/^\d{4}-\d{2}-\d{2}$/;function formatExchangeDateForInput(_0x224cc7){const _0x5156c8=_0x44b171;if(!_0x224cc7)return'';const _0x452571=_0x224cc7['trim']();if(!_0x452571)return'';if(DATE_PATTERN[_0x5156c8(0x186)](_0x452571))return _0x452571;const _0x79c401=_0x452571[_0x5156c8(0x109)](/^(\d{4}-\d{2}-\d{2})/);if(_0x79c401)return _0x79c401[0x1];return'';}function _0x1228(_0x51f39,_0xafe138){const _0x44cc2f=_0x44cc();return _0x1228=function(_0x122816,_0x4bc4ea){_0x122816=_0x122816-0xf1;let _0x11cf6f=_0x44cc2f[_0x122816];return _0x11cf6f;},_0x1228(_0x51f39,_0xafe138);}function normalizeExchangeDateValue(_0x99e78c){const _0x332627=_0x44b171;if(!_0x99e78c)return'';const _0x4b31da=_0x99e78c[_0x332627(0x15f)]();if(!_0x4b31da)return'';if(DATE_PATTERN[_0x332627(0x186)](_0x4b31da))return _0x4b31da;const _0x10bdf1=_0x4b31da[_0x332627(0x109)](/^(\d{4}-\d{2}-\d{2})/);if(_0x10bdf1)return _0x10bdf1[0x1];return'';}function showToast(_0x1bf252,_0x5701c3=_0x44b171(0x180),_0x4c2519=0x9c4){const _0x345b5e=_0x44b171;if(!toastEl)return;toastTimer&&(clearTimeout(toastTimer),toastTimer=null),toastEl[_0x345b5e(0x122)]=_0x1bf252,toastEl[_0x345b5e(0x162)][_0x345b5e(0x160)](_0x345b5e(0x190)),_0x5701c3===_0x345b5e(0x190)&&toastEl[_0x345b5e(0x162)][_0x345b5e(0x172)](_0x345b5e(0x190)),toastEl[_0x345b5e(0x162)][_0x345b5e(0x172)](_0x345b5e(0x178)),toastTimer=setTimeout(()=>{const _0x148227=_0x345b5e;toastEl[_0x148227(0x162)]['remove']('show');},_0x4c2519);}function setLoading(_0x1f9dc7){const _0x1bc1d2=_0x44b171;if(!loadingMask)return;_0x1f9dc7?loadingMask[_0x1bc1d2(0x162)]['add']('show'):loadingMask[_0x1bc1d2(0x162)][_0x1bc1d2(0x160)](_0x1bc1d2(0x178));}function showAuthSection(){const _0x295db4=_0x44b171;if(authSection)authSection[_0x295db4(0x12f)][_0x295db4(0x153)]=_0x295db4(0x18c);if(featureSection)featureSection[_0x295db4(0x12f)][_0x295db4(0x153)]='none';if(settingsSection)settingsSection['style'][_0x295db4(0x153)]=_0x295db4(0x15a);}function showFeatureSection(){const _0x3fc9fe=_0x44b171;if(authSection)authSection['style'][_0x3fc9fe(0x153)]=_0x3fc9fe(0x15a);if(featureSection)featureSection[_0x3fc9fe(0x12f)][_0x3fc9fe(0x153)]=_0x3fc9fe(0x18c);if(settingsSection)settingsSection[_0x3fc9fe(0x12f)][_0x3fc9fe(0x153)]=_0x3fc9fe(0x15a);}function showSettingsSection(){const _0x117121=_0x44b171;if(authSection)authSection['style']['display']='none';if(featureSection)featureSection[_0x117121(0x12f)][_0x117121(0x153)]=_0x117121(0x15a);if(settingsSection)settingsSection[_0x117121(0x12f)][_0x117121(0x153)]=_0x117121(0x18c);loadPersons(()=>{renderPersonList(),hideAddForm();});}function handlePendingView(){const _0xe5961c=_0x44b171;if(!chrome?.['storage']?.[_0xe5961c(0x11c)])return;chrome[_0xe5961c(0x182)]['local'][_0xe5961c(0x15c)](['__SX_PENDING_VIEW__'],_0x1dea57=>{const _0x3c4f72=_0xe5961c,_0x8f3ca=_0x1dea57[_0x3c4f72(0x14e)];if(!_0x8f3ca)return;chrome[_0x3c4f72(0x182)][_0x3c4f72(0x11c)][_0x3c4f72(0x160)](['__SX_PENDING_VIEW__']),_0x8f3ca==='settings'&&showSettingsSection();});}function autoVerifyLicenseOnOpen(){const _0x323f39=_0x44b171;if(!chrome?.[_0x323f39(0x182)]?.[_0x323f39(0x11c)]||!chrome?.[_0x323f39(0x189)])return;setLoading(!![]),chrome[_0x323f39(0x182)][_0x323f39(0x11c)][_0x323f39(0x15c)]([_0x323f39(0x161)],_0xec6166=>{const _0x35a7ab=_0x323f39,_0x27dd32=_0xec6166[_0x35a7ab(0x161)];if(!_0x27dd32){setLoading(![]),showAuthSection();return;}licenseInput&&(licenseInput[_0x35a7ab(0x171)]=_0x27dd32),chrome['runtime'][_0x35a7ab(0x150)]({'type':_0x35a7ab(0x10c),'card_key':_0x27dd32},_0x1321ec=>{const _0xc550d9=_0x35a7ab;setLoading(![]);if(chrome[_0xc550d9(0x189)][_0xc550d9(0x113)]){showAuthSection(),showToast(_0xc550d9(0x18d)+chrome['runtime'][_0xc550d9(0x113)][_0xc550d9(0xfb)],'error');return;}if(!_0x1321ec||!_0x1321ec['ok']){showAuthSection();_0x1321ec&&_0x1321ec[_0xc550d9(0x190)]&&showToast('自动验证失败：'+_0x1321ec['error'],'error');return;}const _0x49fb2e=_0x1321ec[_0xc550d9(0x148)]||{};if(_0x49fb2e['code']===0x0||_0x49fb2e['success']===!![]){showFeatureSection();const _0x378892=_0x49fb2e['data']||{};if(_0x378892['card_type']===_0xc550d9(0x10f)){const _0x28bb85=(_0x378892[_0xc550d9(0x132)]===0x0||_0x378892[_0xc550d9(0x132)]==null)&&(_0x378892[_0xc550d9(0x16b)]===null||_0x378892['expire_time']===''||_0x378892[_0xc550d9(0x16b)]===undefined),_0x29ad80=_0x28bb85?'永久':_0x378892[_0xc550d9(0x16b)]||'未知';showToast('已自动验证成功，到期时间：'+_0x29ad80,_0xc550d9(0x180),0x9c4);}else{if(_0x378892[_0xc550d9(0x120)]===_0xc550d9(0x187)){const _0x1dbf9c=_0x378892['remaining_count'],_0x42ee61=_0x378892[_0xc550d9(0x13c)];showToast(_0xc550d9(0x117)+(_0x1dbf9c??'未知')+'/'+(_0x42ee61??'未知'),'info',0x9c4);}else showToast(_0xc550d9(0x16f),'info',0x898);}handlePendingView();}else{showAuthSection();const _0x5061a3=_0x49fb2e[_0xc550d9(0xfb)]||(_0x49fb2e[_0xc550d9(0x13b)]?_0x49fb2e['msg']:JSON[_0xc550d9(0x14a)](_0x49fb2e));showToast('自动验证失败，请更换卡密重试：'+(_0x5061a3||'未知原因'),'error',0xdac);}});});}autoVerifyLicenseOnOpen(),saveLicenseBtn['addEventListener'](_0x44b171(0x108),()=>{const _0x170bcd=_0x44b171,_0x1ee374=licenseInput['value']['trim']();if(!_0x1ee374){showToast('请输入卡密后再保存。',_0x170bcd(0x190));return;}if(!chrome?.[_0x170bcd(0x182)]?.[_0x170bcd(0x11c)]||!chrome?.[_0x170bcd(0x189)]){showToast(_0x170bcd(0x14f),_0x170bcd(0x190));return;}chrome[_0x170bcd(0x182)][_0x170bcd(0x11c)]['set']({'licenseKey':_0x1ee374},()=>{const _0x28ec0a=_0x170bcd;chrome[_0x28ec0a(0x189)][_0x28ec0a(0x150)]({'type':_0x28ec0a(0x10c),'card_key':_0x1ee374},_0x3814eb=>{const _0x5381ae=_0x28ec0a;if(chrome[_0x5381ae(0x189)][_0x5381ae(0x113)]){showToast(_0x5381ae(0x12a)+chrome[_0x5381ae(0x189)][_0x5381ae(0x113)]['message'],_0x5381ae(0x190));return;}if(!_0x3814eb){showToast(_0x5381ae(0x10a),_0x5381ae(0x190));return;}if(!_0x3814eb['ok']){showToast(_0x5381ae(0x12a)+(_0x3814eb[_0x5381ae(0x190)]||_0x5381ae(0x128)),'error');return;}const _0xc1059=_0x3814eb[_0x5381ae(0x148)]||{};if(_0xc1059[_0x5381ae(0x156)]===0x0||_0xc1059[_0x5381ae(0x165)]===!![]){showFeatureSection();if(_0xc1059[_0x5381ae(0x148)]&&_0xc1059['data'][_0x5381ae(0x120)]===_0x5381ae(0x10f)){const _0x137d40=_0xc1059['data'],_0x168b2a=(_0x137d40[_0x5381ae(0x132)]===0x0||_0x137d40[_0x5381ae(0x132)]==null)&&(_0x137d40[_0x5381ae(0x16b)]===null||_0x137d40[_0x5381ae(0x16b)]===''||_0x137d40['expire_time']===undefined),_0x57e8f0=_0x168b2a?'永久':_0x137d40[_0x5381ae(0x16b)]||'未知';let _0x2913bf=_0xc1059[_0x5381ae(0xfb)]&&_0xc1059[_0x5381ae(0xfb)][_0x5381ae(0x15f)]()?_0xc1059['message'][_0x5381ae(0x15f)]():_0x5381ae(0x159);_0x2913bf[_0x5381ae(0x13e)](_0x5381ae(0x147))&&(_0x2913bf=_0x5381ae(0x159));const _0x315186=_0x2913bf+'，到期时间：'+_0x57e8f0;showToast(_0x315186,_0x5381ae(0x180),0xdac);}else{if(_0xc1059[_0x5381ae(0x148)]&&_0xc1059[_0x5381ae(0x148)][_0x5381ae(0x120)]==='count'){const _0x291c88=_0xc1059[_0x5381ae(0x148)],_0x51ac7c=_0x291c88[_0x5381ae(0x145)],_0xb23655=_0x291c88[_0x5381ae(0x13c)],_0xbe60c0=_0xc1059[_0x5381ae(0xfb)]||'次数卡验证成功，剩余次数：'+(_0x51ac7c??'未知')+'/'+(_0xb23655??'未知');showToast(_0xbe60c0,_0x5381ae(0x180),0xc80);}else showToast(_0xc1059['message']||_0x5381ae(0x16d),_0x5381ae(0x180),0xbb8);}handlePendingView();}else{const _0x5c0fdf=_0xc1059[_0x5381ae(0xfb)]||(_0xc1059[_0x5381ae(0x13b)]?_0xc1059[_0x5381ae(0x13b)]:JSON[_0x5381ae(0x14a)](_0xc1059));showAuthSection(),showToast(_0x5381ae(0xf5)+_0x5c0fdf,_0x5381ae(0x190),0xdac);}});});});const activateScriptBtn=document[_0x44b171(0x15e)](_0x44b171(0x12d));activateScriptBtn&&activateScriptBtn[_0x44b171(0x18b)](_0x44b171(0x108),()=>{const _0x5128d3=_0x44b171;chrome[_0x5128d3(0x17f)][_0x5128d3(0xfe)]({'active':!![],'currentWindow':!![]},_0x30dcb6=>{const _0x2fa9db=_0x5128d3;if(_0x30dcb6['length']===0x0){showToast(_0x2fa9db(0x185),_0x2fa9db(0x190));return;}const _0x255f07=_0x30dcb6[0x0]['id'];chrome[_0x2fa9db(0x17f)][_0x2fa9db(0x150)](_0x255f07,{'type':'ACTIVATE_SCRIPT'},_0x114ecf=>{const _0x4688d0=_0x2fa9db;if(chrome[_0x4688d0(0x189)][_0x4688d0(0x113)]){showToast(_0x4688d0(0x10d)+chrome['runtime'][_0x4688d0(0x113)][_0x4688d0(0xfb)],_0x4688d0(0x190));return;}_0x114ecf&&_0x114ecf[_0x4688d0(0x165)]?showToast(_0x4688d0(0x184),'info'):showToast(_0x114ecf?.[_0x4688d0(0x190)]||_0x4688d0(0x124),_0x4688d0(0x190));});});});function loadPersons(_0x2b8195){const _0x224e8d=_0x44b171;if(!chrome?.[_0x224e8d(0x182)]?.[_0x224e8d(0x11c)]){persons=[];if(_0x2b8195)_0x2b8195();return;}chrome[_0x224e8d(0x182)][_0x224e8d(0x11c)][_0x224e8d(0x15c)]([_0x224e8d(0x142)],_0x13d306=>{const _0x5c6fe2=_0x224e8d,_0x48c1bf=_0x13d306[_0x5c6fe2(0x142)];if(!_0x48c1bf){persons=[];if(_0x2b8195)_0x2b8195();return;}try{const _0x2c657a=typeof _0x48c1bf===_0x5c6fe2(0x177)?JSON[_0x5c6fe2(0x15b)](_0x48c1bf):_0x48c1bf;if(Array[_0x5c6fe2(0x17a)](_0x2c657a))persons=_0x2c657a;else typeof _0x2c657a===_0x5c6fe2(0x107)&&_0x2c657a['name']?persons=[_0x2c657a]:persons=[];}catch(_0x2d9d95){console[_0x5c6fe2(0x190)](_0x5c6fe2(0x141),_0x2d9d95),persons=[];}if(_0x2b8195)_0x2b8195();});}function savePersons(){const _0x7e3462=_0x44b171;if(!chrome?.[_0x7e3462(0x182)]?.[_0x7e3462(0x11c)]){showToast(_0x7e3462(0x13f),'error');return;}const _0x46f18b=JSON[_0x7e3462(0x14a)](persons,null,0x2);chrome[_0x7e3462(0x182)][_0x7e3462(0x11c)][_0x7e3462(0x101)]({'userSettings':_0x46f18b},()=>{const _0x54be24=_0x7e3462;showToast(_0x54be24(0x188),_0x54be24(0x180));});}function renderPersonList(){const _0x3cd9e6=_0x44b171;if(!personList)return;if(persons['length']===0x0){personList[_0x3cd9e6(0x13d)]=_0x3cd9e6(0xf7);addPersonBtn&&(addPersonBtn[_0x3cd9e6(0x122)]=_0x3cd9e6(0x15d),addPersonBtn[_0x3cd9e6(0x166)]=![]);return;}addPersonBtn&&(persons[_0x3cd9e6(0x133)]>=0x14?(addPersonBtn['textContent']=_0x3cd9e6(0x12b),addPersonBtn[_0x3cd9e6(0x166)]=!![],addPersonBtn[_0x3cd9e6(0x12f)]['opacity']=_0x3cd9e6(0xf8)):(addPersonBtn[_0x3cd9e6(0x122)]=_0x3cd9e6(0xf2)+persons[_0x3cd9e6(0x133)]+'/20)',addPersonBtn[_0x3cd9e6(0x166)]=![],addPersonBtn[_0x3cd9e6(0x12f)][_0x3cd9e6(0x16e)]='1')),personList[_0x3cd9e6(0x13d)]=persons[_0x3cd9e6(0x18f)]((_0x15611f,_0x5472fb)=>{const _0x31f482=_0x3cd9e6,_0x55da95=editingIndex===_0x5472fb;return _0x31f482(0x144)+_0x5472fb+_0x31f482(0x149)+(_0x55da95?'editing':'')+_0x31f482(0x170)+(_0x15611f[_0x31f482(0x155)]||_0x31f482(0x173))+_0x31f482(0x17e)+_0x5472fb+'\x22\x20data-action=\x22edit\x22>'+(_0x55da95?'取消':'编辑')+_0x31f482(0x146)+_0x5472fb+'\x22\x20data-action=\x22delete\x22>删除</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x55da95?createInlineEditForm(_0x5472fb,_0x15611f):'')+_0x31f482(0x14c);})[_0x3cd9e6(0x11f)](''),personList[_0x3cd9e6(0x131)](_0x3cd9e6(0x164))[_0x3cd9e6(0x110)](_0x2a3270=>{const _0x4d6ce5=_0x3cd9e6;_0x2a3270[_0x4d6ce5(0x18b)](_0x4d6ce5(0x108),_0x43c9b2=>{const _0x20949b=_0x4d6ce5,_0xbd116d=parseInt(_0x43c9b2[_0x20949b(0xfa)][_0x20949b(0x192)]('data-index')),_0x589e66=_0x43c9b2[_0x20949b(0xfa)][_0x20949b(0x192)](_0x20949b(0x119));if(_0x589e66===_0x20949b(0x106))editPerson(_0xbd116d);else _0x589e66===_0x20949b(0x154)&&deletePerson(_0xbd116d);});}),personList[_0x3cd9e6(0x131)](_0x3cd9e6(0x137))[_0x3cd9e6(0x110)](_0x366379=>{_0x366379['addEventListener']('click',_0x516049=>{const _0x234ef2=_0x1228,_0x5c0517=parseInt(_0x516049[_0x234ef2(0xfa)][_0x234ef2(0x192)](_0x234ef2(0x14d)));saveInlineEdit(_0x5c0517);});}),personList[_0x3cd9e6(0x131)]('.inline-cancel-btn')['forEach'](_0x30e5a1=>{const _0x4aaf93=_0x3cd9e6;_0x30e5a1['addEventListener'](_0x4aaf93(0x108),_0x50d0a2=>{const _0x4e78ef=_0x4aaf93,_0x3aec13=parseInt(_0x50d0a2[_0x4e78ef(0xfa)][_0x4e78ef(0x192)]('data-index'));cancelInlineEdit(_0x3aec13);});});}function showAddForm(){const _0x137ca1=_0x44b171;if(persons[_0x137ca1(0x133)]>=0x14){showToast(_0x137ca1(0x127),_0x137ca1(0x190));return;}editingIndex>=0x0&&(editingIndex=-0x1,renderPersonList()),addFormContainer&&(addFormContainer[_0x137ca1(0x12f)][_0x137ca1(0x153)]=_0x137ca1(0x18c)),addPersonBtn&&(addPersonBtn['style']['display']='none'),clearForm(),editingIndex=-0x1,formTitle&&(formTitle[_0x137ca1(0x122)]='添加人员');}function hideAddForm(){const _0x5dd727=_0x44b171;addFormContainer&&(addFormContainer[_0x5dd727(0x12f)][_0x5dd727(0x153)]=_0x5dd727(0x15a)),addPersonBtn&&(addPersonBtn[_0x5dd727(0x12f)][_0x5dd727(0x153)]=_0x5dd727(0x18c)),clearForm(),editingIndex=-0x1;}function clearForm(){const _0x19dbf0=_0x44b171;if(nameInput)nameInput[_0x19dbf0(0x171)]='';if(remarkInput)remarkInput[_0x19dbf0(0x171)]='';if(phoneInput)phoneInput[_0x19dbf0(0x171)]='';if(idcardInput)idcardInput[_0x19dbf0(0x171)]='';if(provinceInput)provinceInput[_0x19dbf0(0x171)]='';if(cityInput)cityInput['value']='';if(districtInput)districtInput[_0x19dbf0(0x171)]='';if(branchInput)branchInput[_0x19dbf0(0x171)]='';if(exchangeTimeInput)exchangeTimeInput['value']='';if(quantityInput)quantityInput[_0x19dbf0(0x171)]='';}function createInlineEditForm(_0x2a232d,_0x3531f8){const _0x209af6=_0x44b171,_0x4d140a=formatExchangeDateForInput(_0x3531f8['exchangeTime']||'');return'\x0a\x20\x20\x20\x20<div\x20class=\x22edit-form-inline\x22\x20data-edit-index=\x22'+_0x2a232d+_0x209af6(0x174)+(_0x3531f8['name']||'')[_0x209af6(0x193)](/"/g,'&quot;')+_0x209af6(0x136)+(_0x3531f8[_0x209af6(0x143)]||'')[_0x209af6(0x193)](/"/g,_0x209af6(0x179))+'\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22field-label\x22\x20style=\x22margin-top:\x2010px\x22>手机号码</div>\x0a\x20\x20\x20\x20\x20\x20<input\x20class=\x22inline-edit-phone\x22\x20type=\x22tel\x22\x20placeholder=\x22请输入手机号码\x22\x20value=\x22'+(_0x3531f8[_0x209af6(0x16c)]||'')['replace'](/"/g,_0x209af6(0x179))+_0x209af6(0xfd)+(_0x3531f8[_0x209af6(0x158)]||'')['replace'](/"/g,_0x209af6(0x179))+_0x209af6(0x169)+(_0x3531f8[_0x209af6(0x111)]||'')[_0x209af6(0x193)](/"/g,'&quot;')+'\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22field-label\x22\x20style=\x22margin-top:\x2010px\x22>城市</div>\x0a\x20\x20\x20\x20\x20\x20<input\x20class=\x22inline-edit-city\x22\x20type=\x22text\x22\x20placeholder=\x22请输入城市\x22\x20value=\x22'+(_0x3531f8[_0x209af6(0x16a)]||'')[_0x209af6(0x193)](/"/g,_0x209af6(0x179))+'\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22field-label\x22\x20style=\x22margin-top:\x2010px\x22>区/县</div>\x0a\x20\x20\x20\x20\x20\x20<input\x20class=\x22inline-edit-district\x22\x20type=\x22text\x22\x20placeholder=\x22请输入区/县\x22\x20value=\x22'+(_0x3531f8[_0x209af6(0x181)]||'')[_0x209af6(0x193)](/"/g,_0x209af6(0x179))+'\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22field-label\x22\x20style=\x22margin-top:\x2010px\x22>网点</div>\x0a\x20\x20\x20\x20\x20\x20<input\x20class=\x22inline-edit-branch\x22\x20type=\x22text\x22\x20placeholder=\x22请输入网点\x22\x20value=\x22'+(_0x3531f8[_0x209af6(0x130)]||'')[_0x209af6(0x193)](/"/g,_0x209af6(0x179))+_0x209af6(0xf3)+_0x4d140a+_0x209af6(0x183)+(_0x3531f8[_0x209af6(0x10e)]||'')+_0x209af6(0x151)+_0x2a232d+'\x22>保存</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-cancel\x20inline-cancel-btn\x22\x20data-index=\x22'+_0x2a232d+'\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20';}function editPerson(_0x4c6569){const _0x1d8426=_0x44b171;if(_0x4c6569<0x0||_0x4c6569>=persons[_0x1d8426(0x133)])return;if(editingIndex===_0x4c6569){editingIndex=-0x1,renderPersonList();return;}hideAddForm(),editingIndex=_0x4c6569,renderPersonList();const _0x506c05=personList[_0x1d8426(0x152)](_0x1d8426(0x139)+_0x4c6569+'\x22]');_0x506c05&&_0x506c05['scrollIntoView']({'behavior':'smooth','block':_0x1d8426(0x11b)});}function deletePerson(_0x57ddba){const _0x66f596=_0x44b171;if(_0x57ddba<0x0||_0x57ddba>=persons[_0x66f596(0x133)])return;confirm(_0x66f596(0x175))&&(persons[_0x66f596(0x116)](_0x57ddba,0x1),savePersons(),renderPersonList(),showToast(_0x66f596(0x11e),_0x66f596(0x180)));}function saveInlineEdit(_0x349524){const _0x2beaeb=_0x44b171;if(_0x349524<0x0||_0x349524>=persons[_0x2beaeb(0x133)])return;const _0x3f6bf0=personList[_0x2beaeb(0x152)]('[data-edit-index=\x22'+_0x349524+'\x22]');if(!_0x3f6bf0)return;const _0x317c81={'name':_0x3f6bf0['querySelector'](_0x2beaeb(0xff))?.[_0x2beaeb(0x171)][_0x2beaeb(0x15f)]()||'','remark':_0x3f6bf0['querySelector']('.inline-edit-remark')?.['value'][_0x2beaeb(0x15f)]()||'','phone':_0x3f6bf0[_0x2beaeb(0x152)](_0x2beaeb(0x126))?.[_0x2beaeb(0x171)][_0x2beaeb(0x15f)]()||'','idcard':_0x3f6bf0[_0x2beaeb(0x152)](_0x2beaeb(0x168))?.[_0x2beaeb(0x171)][_0x2beaeb(0x15f)]()||'','province':_0x3f6bf0['querySelector'](_0x2beaeb(0x17b))?.[_0x2beaeb(0x171)][_0x2beaeb(0x15f)]()||'','city':_0x3f6bf0[_0x2beaeb(0x152)](_0x2beaeb(0x176))?.[_0x2beaeb(0x171)]['trim']()||'','district':_0x3f6bf0[_0x2beaeb(0x152)](_0x2beaeb(0x17d))?.[_0x2beaeb(0x171)]['trim']()||'','branch':_0x3f6bf0[_0x2beaeb(0x152)](_0x2beaeb(0x13a))?.[_0x2beaeb(0x171)][_0x2beaeb(0x15f)]()||'','exchangeTime':normalizeExchangeDateValue(_0x3f6bf0[_0x2beaeb(0x152)](_0x2beaeb(0x14b))?.[_0x2beaeb(0x171)]||''),'quantity':_0x3f6bf0[_0x2beaeb(0x152)](_0x2beaeb(0x12c))?.[_0x2beaeb(0x171)][_0x2beaeb(0x15f)]()||''};if(!_0x317c81[_0x2beaeb(0x155)]){showToast(_0x2beaeb(0x17c),_0x2beaeb(0x190));return;}persons[_0x349524]=_0x317c81,savePersons(),editingIndex=-0x1,renderPersonList(),showToast(_0x2beaeb(0x125),'info');}function cancelInlineEdit(_0x11b331){editingIndex=-0x1,renderPersonList();}function savePerson(){const _0x208a55=_0x44b171,_0xeeaef4={'name':nameInput?.['value'][_0x208a55(0x15f)]()||'','remark':remarkInput?.[_0x208a55(0x171)][_0x208a55(0x15f)]()||'','phone':phoneInput?.[_0x208a55(0x171)][_0x208a55(0x15f)]()||'','idcard':idcardInput?.['value'][_0x208a55(0x15f)]()||'','province':provinceInput?.[_0x208a55(0x171)][_0x208a55(0x15f)]()||'','city':cityInput?.[_0x208a55(0x171)][_0x208a55(0x15f)]()||'','district':districtInput?.[_0x208a55(0x171)][_0x208a55(0x15f)]()||'','branch':branchInput?.[_0x208a55(0x171)][_0x208a55(0x15f)]()||'','exchangeTime':normalizeExchangeDateValue(exchangeTimeInput?.['value']||''),'quantity':quantityInput?.[_0x208a55(0x171)][_0x208a55(0x15f)]()||''};if(!_0xeeaef4['name']){showToast(_0x208a55(0x17c),_0x208a55(0x190));return;}if(editingIndex>=0x0)persons[editingIndex]=_0xeeaef4,showToast(_0x208a55(0x125),_0x208a55(0x180));else{if(persons['length']>=0x14){showToast(_0x208a55(0x127),_0x208a55(0x190));return;}persons['push'](_0xeeaef4),showToast(_0x208a55(0x167),'info');}savePersons(),renderPersonList(),hideAddForm();}settingsBtn&&settingsBtn[_0x44b171(0x18b)](_0x44b171(0x108),()=>{showSettingsSection();});backBtn&&backBtn[_0x44b171(0x18b)]('click',()=>{hideAddForm(),showFeatureSection();});addPersonBtn&&addPersonBtn['addEventListener'](_0x44b171(0x108),()=>{showAddForm();});savePersonBtn&&savePersonBtn[_0x44b171(0x18b)](_0x44b171(0x108),()=>{savePerson();});cancelFormBtn&&cancelFormBtn[_0x44b171(0x18b)]('click',()=>{hideAddForm();});
